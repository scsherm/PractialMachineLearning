<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>PractialMachineLearning by scsherm</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header class="without-description">
        <h1>PractialMachineLearning</h1>
        <p></p>
        <p class="view"><a href="https://github.com/scsherm/PractialMachineLearning">View the Project on GitHub <small>scsherm/PractialMachineLearning</small></a></p>
        <ul>
          <li><a href="https://github.com/scsherm/PractialMachineLearning/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/scsherm/PractialMachineLearning/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/scsherm/PractialMachineLearning">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p>&lt;!DOCTYPE html&gt;</p>

<p></p>

<p></p>

<p>

</p>

<p></p>

<p></p>Predicting the Quality of Weight Lifting Exercises



<p>
</p>







code{white-space: pre;}

<p></p>




  pre:not([class]) {
    background-color: white;
  }




<p></p>

<p></p>


.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}


<div>


<div id="header">
<h1>
<a id="predicting-the-quality-of-weight-lifting-exercises" class="anchor" href="#predicting-the-quality-of-weight-lifting-exercises" aria-hidden="true"><span class="octicon octicon-link"></span></a>Predicting the Quality of Weight Lifting Exercises</h1>
<h4>
<a id="samuel-sherman" class="anchor" href="#samuel-sherman" aria-hidden="true"><span class="octicon octicon-link"></span></a><em>Samuel Sherman</em>
</h4>
</div>

<div id="synopsis">
<h2>
<a id="synopsis" class="anchor" href="#synopsis" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Synopsis</strong>
</h2>
<p>The dataset was provided through Pontifical Catholic University of Rio De Janeiro. A link for the description of the data is <a href="http://groupware.les.inf.puc-rio.br/har">here</a>. The purpose of the dataset is to provide a method of predicting the quality of how an exercise is performed. Class “A” identifies a correctly performed exercise, while classes “B” through “E” identifies common mistakes.</p>
</div>

<div id="loading-and-examining-data">
<h2>
<a id="loading-and-examining-data" class="anchor" href="#loading-and-examining-data" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Loading and Examining Data</strong>
</h2>
<p>The caret package is loaded and the data is loaded, while trying to identify all NA values.</p>
<pre><code>library(caret)</code></pre>
<pre><code>## Loading required package: lattice
## Loading required package: ggplot2</code></pre>
<pre><code>#Read data files and make sure all empty variables are defined as NA
training &lt;- read.csv("pml-training.csv", na.strings = c("", "NA", "#DIV/0!"))
testing &lt;- read.csv("pml-testing.csv", na.strings = c("", "NA", "#DIV/0!"))
trainRows &lt;- nrow(training)
testRows &lt;- nrow(testing)
testRows/(testRows + trainRows)</code></pre>
<pre><code>## [1] 0.001018226</code></pre>
<pre><code>trainRows/(testRows + trainRows)</code></pre>
<pre><code>## [1] 0.9989818</code></pre>
</div>

<div id="pre-processing">
<h2>
<a id="pre-processing" class="anchor" href="#pre-processing" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Pre-Processing</strong>
</h2>
<p>The training represents 99.8% of the data and the testing represents .1% of the data. Therefore, I find it appropriate to re-partition the original training dataset, as to avoid over-fitting. I apply 75% of the data to “training2” and 25% to “testing2”, which will be used for cross-validation. I then identify the rows with significant NA values and remove them from the dataset, as they will not be used as predictors.</p>
<pre><code>set.seed(6847)
# 75% of data for training and 25% for cross-validation
inTrain &lt;- createDataPartition(training$classe, p = 3/4, list = F)
training2 &lt;- training[inTrain, ] #original training data repartitioned
testing2 &lt;- training[-inTrain, ]

#pre-processing
training2 &lt;- training2[ , -c(1,2,3,4,5,6,7)] #remove first 7 columns
testing2 &lt;- testing2[ , -c(1,2,3,4,5,6,7)] #remove first 7 columns
NAtrain &lt;- apply(training2,2,function(x) {sum(is.na(x))}) #NA's per column 
NAtest &lt;- apply(testing2,2,function(x) {sum(is.na(x))}) #NA's per column
TrainData &lt;- training2[ , which(NAtrain == 0)] #columns without na's 
TestData &lt;- testing2[ , which(NAtest == 0)] #columns without na's</code></pre>
</div>

<div id="model-fitting">
<h2>
<a id="model-fitting" class="anchor" href="#model-fitting" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Model-Fitting</strong>
</h2>
<p>I apply the random forest model to the dataset, as it is considered the most reliable model. If errors are too high, another model will be tested.</p>
<pre><code>mFit &lt;- train(classe ~., data = TrainData, method = "rf") #classe as outcome; all other variables as predictors</code></pre>
<pre><code>## Loading required package: randomForest
## randomForest 4.6-10
## Type rfNews() to see new features/changes/bug fixes.</code></pre>
</div>

<div id="cross-validation">
<h2>
<a id="cross-validation" class="anchor" href="#cross-validation" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Cross-Validation</strong>
</h2>
<p>I start with the cross-validation dataset “TestData”, representing 25% of the data. I predict the classification on all exercises for all observations and compare to the true values.</p>
<pre><code>predict &lt;- predict(mFit, TestData)
numRight &lt;- sum(predict == TestData$classe)
numRows &lt;- nrow(TestData) 
numRight/numRows # Percent of values correctly identified</code></pre>
<pre><code>## [1] 0.9938825</code></pre>
<pre><code>table(predict, TestData$classe) # Diagonal matrix</code></pre>
<pre><code>##        
## predict    A    B    C    D    E
##       A 1389    6    0    0    0
##       B    6  941    3    0    1
##       C    0    2  849    5    1
##       D    0    0    3  798    2
##       E    0    0    0    1  897</code></pre>
<p>It can be seen that the model is providing good accuracy, as 99% of the “classe” variables identified are correct. Also, examining the table of predicted values and true values reveals an almost perfect diagonal matrix. The majority of the values are along the diagonal, which represents a correctly identified outcome. Despite the few errors, I have high confidence that the model will correctly identify .1% of the data and has not been over-fitted.</p>
</div>

<div id="final-prediction">
<h2>
<a id="final-prediction" class="anchor" href="#final-prediction" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Final Prediction</strong>
</h2>
<p>I now apply all the same pre-processing applied to the training dataset, to the testing dataset as well. I then predict the classification to all 20 observations and write the values to their appropriately named text files for submission.</p>
<pre><code>#Clean testing data set exactly the same as training
testing &lt;- testing[, -c(1,2,3,4,5,6,7)]
NAtesting &lt;- apply(testing,2,function(x) {sum(is.na(x))})
finalTesting &lt;- testing[,which(NAtesting == 0)]
finalPrediction &lt;- predict(mFit, finalTesting)
#Function to write text files
pml_write_files = function(x){
  n = length(x)
  for(i in 1:n){
    filename = paste0("problem_id_",i,".txt")
    write.table(x[i],file=filename,quote=FALSE,row.names=FALSE,col.names=FALSE)
  }
}

pml_write_files(finalPrediction) #write files for submission</code></pre>
</div>

<p></p>
</div>







<p>
</p>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/scsherm">scsherm</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
